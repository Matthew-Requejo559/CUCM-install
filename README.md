# CUCM-install
CUCM install in VMware Player 17

This is how i set up CUCM 12.5 on my home lab in VMware PLayer 17. I did not have ESXI to play with, so i made do with what i had. 
You can download CUCM from Cisco on a trial basis, or you can find it from one of those Index Of listings. 

![001](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/e9bd66bd-b6b8-4907-930c-5bc00f35839a)
![002](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/b7a4df3f-0948-4919-a273-02eef1210e8a)
![003](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/7b824307-6006-470b-ae83-7cf94565c9d2)
![004](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/43d0b0cf-b0c5-4c77-9de0-ea20f3e73b63)
![005](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/2db6e934-94cc-4b28-a1c4-0a6d5a7e63c3)
![006](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/17f1c5fc-dde6-444a-9e7e-1556fa5b99f9)
![007](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/2002efed-d2cc-4369-9ba3-6c5a1bdb35e3)
![008](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/b2f3ae70-043f-4292-a2c4-8373b2bb2396)
![009](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/ee910183-b297-4c2e-86f7-3009d6fa237e)
![010](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/1a011768-8f0c-491b-a608-84db567e4302)

# **This is what you will see if you click test**

![011](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/648b99c0-6abf-4d23-b5e9-eddb509654ce)

# **so do not click test**

![0012](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/f2bac999-6fa2-43e9-bee5-5f27489ea358)
![013](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/15902255-180a-4809-8322-24d585bac267)
![014](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/89aa8c2d-5020-42c5-b7af-cba0c821c4e9)
![015](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/e5651787-7c7a-4fb8-81c1-8c2f71f314b7)
![016](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/cdea835f-4859-4320-8697-21f51e4f7e92)
![017](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/7b060ea9-730e-4494-a566-15dbe4eb7fe2)
![018](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/b2036ea6-3702-4fe8-980a-8929e4c93325)
![019](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/c3923e9b-2ed0-4cdb-8fa0-267c681ac009)
![020](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/46baf47f-f8d1-4ac6-ac52-56bd814611e8)
![021](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/395691ea-0a33-4d74-9216-125cb6c16d79)
![022](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/f2f7e053-43b7-4248-a12b-90e0449d6577)
![023](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/5c4d479f-daa8-4100-882b-f7bde0124e20)
![024](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/248f95cf-af40-49e0-9df3-49c3570dbc31)
![025](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/0d680d25-736e-4bae-8904-23a166c1624d)
![026](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/8c1e6293-a45b-4d25-a924-d6dc664c51a5)
![027](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/9f342f26-6644-4116-9761-179fefc35ae7)

# **Just set the NTP to the default gateway address.** 

![028](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/70e350d7-7bfe-4e39-a3e0-1f505daac2d1)
![029](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/e4b9f45b-a777-4fa0-a783-a1a940711d7a)
![030](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/86da8535-eb26-49f1-8b46-2b462d7ff26e)
![031](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/65dd4c33-0c6f-40ac-99bc-d24482983731)
![032](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/f7263e73-01e8-4779-a3a9-1828e4329a37)
![033](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/c6deb5de-3499-481b-9c7b-d159aed60cb8)
![034](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/ca224e3d-51ac-41e7-8ba6-6b5346ab0641)
![035](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/75ef2a1a-1eca-4b02-a540-22412a3e40e7)

# **here, the NTP broke and i could not get it to fix in bridged mode. I had previously set this VM up in NAT mode and manually swicthed it after set up. I had to go back and switch this set up to NAT mode to finish installation. Below are the updated IP settings i made.**

![0001nat](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/b01e6a9a-29b2-482a-ba60-ed7b3fcc7067)

# **this is the virtual adapter i set the IP scheme too. I knew it was this one because vmnet1 is used for my gns3 VM**

![0002vmnet](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/79d23cf0-5563-48ec-9673-97e2785c7de4)
![0003network](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/fe164ca2-fc74-435d-a8f6-76fa1921ec62)
![0004ntp](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/e057462d-ab8a-4767-bd9f-b4dcdd56fdeb)
![0005test](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/38a3b73b-3e51-4ed3-98d0-3fef31b8f1fa)
![0006](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/dcb68ec0-d602-436a-adec-ba4486084038)
![0007](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/b957b078-9b15-41db-be9b-65d84fd6e763)

 # **after these changes setup completed successfully** 

![037](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/2bbb3e7f-52a5-4fae-9ffe-a1311b77198c)
![038](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/c2a09ba3-6801-452f-b872-c17c6739d957)
![039](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/cc4960cf-8f77-4d96-a63f-688b8aeb465a)

# **if you run into a 404 error when trying to log into admin portal from the web GUI for the first time, try restarting the tomcat service from the CLI with: utils service restart Cisco Tomcat**

# so, we have CUCM set up. Great! But there is a problem. Since we are in NAT mode, we cannot access CUCM from any device but the host machine. There is no router between the host and CUCM, so outside traffic will not route to the VM. There are different methods around this, such as setting up virtual routers, or using a router from GNS3. But i can only run 1 VM at a time with VMplayer. So, i will switch to bridged mode and change the IP scheme, and the NTP server from the CLI. I will place it on the same subnet as my physical LAN for the LAB< but in a real environment, we would probably want it on a different network segment. Again, for that, we would need a router sitting in front of CUCM, virtual or physical, which i cannot set up for this lab. 

# **Change to Bridged mode**

![040](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/f1892f9e-8b2b-4fa6-886d-c33f97b5d917)

# **First, let's take a look at the NTP settings with this command: utils ntp status**

![041](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/00eba023-37c7-41e3-9b96-abdf0a459eea)

# **Next, we want to check the network settings with this command: show network eth0**

![042](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/2f6777c6-5e26-4d7f-b027-da298d52ec94)

# **Let's go ahead and change these settings to match the 192.168.1.x/24 scheme of my physical LAN with: set network ip eth0 192.168.1.250 255.255.255.0 192.168.1.1**
# **use the ? if you are unsure on how to syntax a command**

![043](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/96283fd5-fca9-4b17-9423-822d3d36a7ee)
![044](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/bed112c1-5d22-4af1-9923-f60a6a70fd79)

# **Before we change the NTP server to the new gateway, lets make sure we can reach it with: utils network ping 192.168.1.1**

![045](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/a409302c-6b44-4de6-91be-637d1c6118f1)

# **Ping Success! But, we recieved DUP! responses. This might be because we used a different IP than my physical machine and we are sharing the same physical NIC. So, maybe the router is responding to the ping twice? Let's see what happens if we change the CUCM ip to 192.168.1.166 to match my physical machine. I didnt screenshot it, but when i attemted to make the NTP the gateway, it reported unreachable. This is probably due to the DUP! ping responses as well.**

![046](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/6bcd5e39-2ffe-48d3-8722-f9a1c4537c75)

# **Ping again now shows no DUP! replies. Great! lets try that NTP one more time.**

![047](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/2d7a8bcb-1076-49f1-8d4e-1a993cc229f9)

# **NTP add with: utils ntp server add 192.168.1.1**

![048](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/b09c944d-279c-4975-b75d-acb2042a3ce9)

# **Still broken. Let's try from the GUI**
# **GUI did not work. Maybe because IP conflict with host machine. I have 3 physical NICS and one wireless NIC on my physical machine. I kept guest machine in bridged mode, hardlined my host machine, and set my realtekUSB WiFi adapter to connect to guest machine only. Restarted Tomcat, and GUI now works with the 192.168.1.166 address.** 

![049](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/977d7e0d-8c17-4ae1-a5b3-357382fdfde9)

# **Let's see if we can add the NTP now. If not, i will move on. Via the GUI we will go to: System>PhoneNTP reference>Add New**

![049](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/a60b7c34-3583-4cb9-b029-e23d52850389)
![050](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/29987605-f510-4850-8f45-f1c78a4d1afc)
![051](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/35dc0fc0-02d5-4836-8748-af6a4efa3ae5)
![052](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/81d29bf0-d762-4343-b16e-e3082dd79e55)
![053](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/75ad0de2-0085-43e9-ae9c-bb01681ce9f3)
![054](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/1b0c981e-d258-49de-a84e-885f206de62f)
![055](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/c084a4c2-f32f-4774-82d9-cc28597cd15d)
![056](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/2fe881de-8d92-4aeb-b865-3f78977ee122)
![057](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/5ae5819b-f5c7-45f5-8172-2c6982830d4e)

# **None of that worked. I set up an NTP server on my Ubuntu host and made my host IP of 192.168.1.183 as the NTP server. It worked. Was it ideal? Probably not, but neither is my set up. I'm just making it work with what i have. ** 

![058](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/4aab1de0-da3f-48a4-af88-ff25919958a0)
![059](https://github.com/Matthew-Requejo559/CUCM-install/assets/136190678/b8b50a37-2822-4f84-a9e7-a2a40436f11f)

# **Went back and changed phone NTP reference to reflect new IP. And now we are ready to start setting up some general configs for CUCM that will make adding phones and sites easier down the road. Please refer to my next guide on CUCM configs. https://github.com/Matthew-Requejo559/CUCM-Configs/tree/main**


